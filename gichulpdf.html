<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>구글 드라이브 문제 은행</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700;800&display=swap');
        body { font-family: 'Nanum Gothic', sans-serif; }
        .modal-backdrop { background-color: rgba(0, 0, 0, 0.7); backdrop-filter: blur(3px); }
        .tab-active { background-color: #2563eb; color: white; border-color: #2563eb; }
        .tab-inactive { background-color: #f3f4f6; color: #4b5563; border-color: #e5e7eb; }
    </style>
</head>

<body class="bg-gray-100 flex flex-col text-gray-800 h-screen overflow-hidden">

    <header class="bg-white shadow-md border-b border-gray-200 z-30 shrink-0">
        <div class="container mx-auto px-4 py-2">
            <div class="flex justify-between items-center mb-2">
                <h1 class="text-lg font-extrabold text-gray-800 flex items-center">
                    <i class="fab fa-google-drive mr-2 text-green-600"></i>
                    <span class="hidden sm:inline">구글 드라이브 문제 은행</span>
                    <span class="sm:hidden">GDrive 은행</span>
                </h1>
                
                <div class="flex items-center gap-2">
                    <div class="hidden md:flex bg-gray-100 rounded-lg p-1 mr-2 border border-gray-200">
                        <button onclick="setMode('split')" id="btnSplit" class="px-3 py-1 text-xs font-bold rounded shadow-sm bg-white text-blue-600 transition">분할</button>
                        <button onclick="setMode('modal')" id="btnModal" class="px-3 py-1 text-xs font-bold rounded text-gray-500 hover:text-gray-700 transition">팝업</button>
                    </div>

                    <button id="authorize_button" class="hidden px-4 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm font-bold shadow-sm" onclick="handleAuthClick()">
                        <i class="fab fa-google mr-2"></i> 로그인
                    </button>
                    <button id="signout_button" class="hidden px-4 py-1.5 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 text-sm font-bold shadow-sm" onclick="handleSignoutClick()">
                        로그아웃
                    </button>
                    <button id="load_drive_button" class="hidden px-4 py-1.5 bg-green-600 text-white rounded hover:bg-green-700 text-sm font-bold shadow-sm ml-2" onclick="loadDriveFiles()">
                        <i class="fas fa-sync mr-2"></i> 파일 불러오기
                    </button>
                </div>
            </div>

            <div class="grid grid-cols-3 sm:grid-cols-5 gap-1 sm:gap-2">
                <select id="filterYear" class="w-full p-1.5 bg-gray-50 border rounded text-xs"><option value="">연도</option></select>
                <select id="filterMonth" class="w-full p-1.5 bg-gray-50 border rounded text-xs"><option value="">월</option></select>
                <select id="filterGrade" class="w-full p-1.5 bg-gray-50 border rounded text-xs"><option value="">학년</option></select>
                <select id="filterNumber" class="w-full p-1.5 bg-gray-50 border rounded text-xs"><option value="">문항</option></select>
                <select id="filterType" class="w-full p-1.5 bg-gray-50 border rounded text-xs col-span-2 sm:col-span-1"><option value="">유형</option></select>
            </div>
            <div id="statusMsg" class="text-[10px] text-gray-400 mt-1 text-right truncate">구글 드라이브에 로그인해주세요.</div>
        </div>
    </header>

    <main class="flex-grow flex flex-col md:flex-row container mx-auto md:px-4 md:py-4 gap-4 overflow-hidden relative">
        <div id="listSection" class="w-full bg-white md:rounded-lg shadow-sm border md:border-gray-200 flex flex-col h-full transition-all duration-300 z-10">
            <div class="p-3 border-b border-gray-100 bg-gray-50 font-bold text-gray-700 text-sm flex justify-between items-center shrink-0">
                <span><i class="fas fa-list mr-2"></i>문항 목록</span>
                <span id="listCount" class="text-xs text-gray-500 font-normal"></span>
            </div>
            <div id="listArea" class="flex-grow overflow-y-auto p-2 space-y-2 bg-gray-50/50">
                <div class="flex flex-col items-center justify-center h-full text-gray-400 text-sm">
                    <i class="fab fa-google-drive text-3xl mb-2 opacity-50"></i>
                    <p>로그인 후 '파일 불러오기'를<br>클릭하세요.</p>
                </div>
            </div>
        </div>

        <div id="viewerSection" class="hidden">
            <div id="viewerContent" class="flex flex-col bg-white relative overflow-hidden shadow-2xl transition-all">
                <div class="px-2 py-2 border-b border-gray-200 bg-white flex justify-between items-center shrink-0 h-12 md:h-14 shadow-sm z-20">
                    <div class="flex space-x-1 mr-2 shrink-0">
                        <button id="tabBtnP" onclick="switchTab('p')" class="tab-active px-3 py-1.5 text-xs md:text-sm font-bold rounded-md border transition flex items-center shadow-sm"><i class="fas fa-question-circle mr-1.5"></i> 문제</button>
                        <button id="tabBtnS" onclick="switchTab('s')" class="tab-inactive px-3 py-1.5 text-xs md:text-sm font-bold rounded-md border transition flex items-center shadow-sm"><i class="fas fa-lightbulb mr-1.5"></i> 해설</button>
                    </div>
                    <div class="flex items-center bg-gray-100 rounded-md border border-gray-200 p-0.5 mx-auto">
                        <button onclick="controlZoom(-20)" class="w-8 h-7 flex items-center justify-center text-gray-600 hover:bg-white hover:text-blue-600 rounded"><i class="fas fa-minus text-xs"></i></button>
                        <span id="zoomLabel" class="text-xs font-mono font-bold text-gray-700 w-10 text-center select-none">100%</span>
                        <button onclick="controlZoom(20)" class="w-8 h-7 flex items-center justify-center text-gray-600 hover:bg-white hover:text-blue-600 rounded"><i class="fas fa-plus text-xs"></i></button>
                        <button onclick="controlZoom(0)" class="w-8 h-7 flex items-center justify-center text-gray-500 hover:bg-white hover:text-red-500 rounded border-l ml-0.5"><i class="fas fa-redo text-xs"></i></button>
                    </div>
                    <div class="flex items-center shrink-0 ml-2">
                        <button onclick="closeViewer()" id="btnCloseModal" class="text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full w-8 h-8 flex items-center justify-center transition"><i class="fas fa-times text-lg"></i></button>
                        <div id="splitHeaderSpacer" class="hidden w-2"></div> 
                    </div>
                </div>
                <div class="flex-grow relative bg-gray-200 w-full h-full overflow-auto" id="zoomScrollArea">
                    <div id="zoomWrapper" class="w-full h-full min-h-full bg-white transition-all duration-200 ease-out origin-top-left mx-auto">
                        <iframe id="iframeP" src="" class="w-full h-full border-none bg-white block"></iframe>
                        <iframe id="iframeS" src="" class="w-full h-full border-none bg-white hidden"></iframe>
                        <div id="emptyViewer" class="absolute inset-0 flex items-center justify-center text-gray-400 flex-col bg-gray-100 z-30">
                            <i class="fas fa-mouse-pointer text-4xl mb-3 opacity-30"></i>
                            <p class="text-sm">목록에서 문항을 선택하세요.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        /* ==========================================================
           1. Google API Configuration (반드시 본인의 키로 교체하세요!)
           ========================================================== */
        const CLIENT_ID = '129767670296-eipi50ba5g8r1fp1rr45f6e1l4vl9bhk.apps.googleusercontent.com'; // 구글 클라우드 콘솔에서 발급받은 클라이언트 ID
        const API_KEY = 'AIzaSyArljKxa14eoTIacwnDs5rtg6pfcakM2xg';     // 구글 클라우드 콘솔에서 발급받은 API 키
        
        // 특정 폴더 ID (옵션): 특정 폴더 안의 파일만 가져오고 싶으면 해당 폴더의 ID를 입력
        // 비워두면 드라이브 전체에서 검색합니다.
        // 폴더 ID는 구글 드라이브 URL에서 `folders/` 뒤에 있는 긴 문자열입니다.
        const TARGET_FOLDER_ID = '1f8PTXvFK1Rkri_rrcyHeSvn1ZAkw7RG2'; 

        const DISCOVERY_DOC = 'https://www.googleapis.com/discovery/v1/apis/drive/v3/rest';
        const SCOPES = 'https://www.googleapis.com/auth/drive.readonly';

        let tokenClient;
        let gapiInited = false;
        let gisInited = false;

        // --- Google API Initialization ---
        function gapiLoaded() {
            gapi.load('client', initializeGapiClient);
        }

        async function initializeGapiClient() {
            await gapi.client.init({
                apiKey: API_KEY,
                discoveryDocs: [DISCOVERY_DOC],
            });
            gapiInited = true;
            maybeEnableButtons();
        }

        function gisLoaded() {
            tokenClient = google.accounts.oauth2.initTokenClient({
                client_id: CLIENT_ID,
                scope: SCOPES,
                callback: '', // defined later
            });
            gisInited = true;
            maybeEnableButtons();
        }

        function maybeEnableButtons() {
            if (gapiInited && gisInited) {
                document.getElementById('authorize_button').classList.remove('hidden');
            }
        }

        function handleAuthClick() {
            tokenClient.callback = async (resp) => {
                if (resp.error !== undefined) {
                    throw (resp);
                }
                document.getElementById('authorize_button').classList.add('hidden');
                document.getElementById('signout_button').classList.remove('hidden');
                document.getElementById('load_drive_button').classList.remove('hidden');
                document.getElementById('statusMsg').innerText = "로그인 완료. 파일을 불러오세요.";
            };

            if (gapi.client.getToken() === null) {
                tokenClient.requestAccessToken({prompt: 'consent'});
            } else {
                tokenClient.requestAccessToken({prompt: ''});
            }
        }

        function handleSignoutClick() {
            const token = gapi.client.getToken();
            if (token !== null) {
                google.accounts.oauth2.revoke(token.access_token);
                gapi.client.setToken('');
                document.getElementById('authorize_button').classList.remove('hidden');
                document.getElementById('signout_button').classList.add('hidden');
                document.getElementById('load_drive_button').classList.add('hidden');
                document.getElementById('listArea').innerHTML = "";
                document.getElementById('statusMsg').innerText = "로그아웃 되었습니다.";
                loadedFiles = [];
                renderList([]);
            }
        }

        // --- Fetch Files from Drive ---
        async function loadDriveFiles() {
            const statusMsg = document.getElementById('statusMsg');
            statusMsg.innerText = "구글 드라이브 검색 중...";
            
            try {
                // 검색 쿼리: PDF 파일이고, 삭제되지 않았으며, (옵션) 특정 폴더 내부
                let query = "mimeType = 'application/pdf' and trashed = false";
                if (TARGET_FOLDER_ID) {
                    query += ` and '${TARGET_FOLDER_ID}' in parents`;
                }

                let files = [];
                let pageToken = null;

                // 페이징 처리 (파일이 많을 경우 반복 요청)
                do {
                    const response = await gapi.client.drive.files.list({
                        q: query,
                        fields: 'nextPageToken, files(id, name, webContentLink)', // 필요한 필드만 요청
                        pageToken: pageToken
                    });
                    files = files.concat(response.result.files);
                    pageToken = response.result.nextPageToken;
                } while (pageToken);

                if (files.length === 0) {
                    statusMsg.innerText = "PDF 파일이 없습니다.";
                    return;
                }

                processDriveFiles(files);

            } catch (err) {
                statusMsg.innerText = "파일 로드 오류: " + err.message;
                console.error(err);
            }
        }

        // --- Main Logic (Adapted for Drive Files) ---
        let loadedFiles = [];
        let pdfMap = {}; // ID -> Google Drive webContentLink or Embed Link

        function processDriveFiles(files) {
            loadedFiles = [];
            pdfMap = {};
            const regex = /^(\d{4})_(\d{2})_(\d{2})_(\d{2})_(.+?)_(p|s)\.pdf$/i;

            let count = 0;
            for (const file of files) {
                const match = file.name.match(regex);
                if (match) {
                    // 구글 드라이브 파일 보기 링크 생성
                    // webContentLink는 다운로드 트리거가 될 수 있으므로, 미리보기용 임베드 URL 사용 권장
                    // URL 포맷: https://drive.google.com/file/d/[FILE_ID]/preview
                    const previewUrl = `https://drive.google.com/file/d/${file.id}/preview`;
                    
                    pdfMap[file.id] = previewUrl; // 로컬의 Blob URL 대신 드라이브 URL 사용

                    loadedFiles.push({
                        id: file.id, // 드라이브 파일 ID를 그대로 사용
                        fileName: file.name,
                        year: match[1], month: match[2],
                        grade: match[3], number: match[4],
                        typeDesc: match[5], kind: match[6]
                    });
                    count++;
                }
            }

            document.getElementById('statusMsg').innerText = `총 ${count}개의 파일을 불러왔습니다.`;
            updateFilterOptions();
            applyFilters();
        }

        // --- 기존 기능 (UI, 필터, 뷰어 로직 등) ---
        // (이전 코드와 동일하되, 전역 변수 초기화 위치만 일부 다름)
        
        let fileGroups = {};
        let viewMode = 'split'; 
        let isMobile = false;
        let activeTab = 'p'; 
        let currentGroupKey = null; 
        let currentZoom = 100;

        const listSection = document.getElementById('listSection');
        const viewerSection = document.getElementById('viewerSection');
        const viewerContent = document.getElementById('viewerContent');
        const zoomWrapper = document.getElementById('zoomWrapper');
        const zoomLabel = document.getElementById('zoomLabel');
        const zoomScrollArea = document.getElementById('zoomScrollArea');
        const btnSplit = document.getElementById('btnSplit');
        const btnModal = document.getElementById('btnModal');
        const btnCloseModal = document.getElementById('btnCloseModal');
        const splitHeaderSpacer = document.getElementById('splitHeaderSpacer');
        const iframeP = document.getElementById('iframeP');
        const iframeS = document.getElementById('iframeS');
        const emptyViewer = document.getElementById('emptyViewer');
        const tabBtnP = document.getElementById('tabBtnP');
        const tabBtnS = document.getElementById('tabBtnS');

        window.addEventListener('resize', checkDevice);
        checkDevice();
        setMode('split');

        // (이하 함수들은 이전 코드와 100% 동일합니다. 복사해서 사용하세요)
        // controlZoom, applyZoom, loadGroup, switchTab, checkDevice, setMode, applyLayout, openViewer, closeViewer
        // updateFilterOptions, populateSelect, applyFilters, renderList
        
        /* -------------------------------------------------------------
           [아래 내용은 이전 답변의 스크립트 함수들을 그대로 붙여넣으면 됩니다]
           지면 관계상 핵심 함수만 위에 구현하였고, UI 로직은 재사용합니다.
           ------------------------------------------------------------- */
        
        // 줌 컨트롤 로직
        function controlZoom(delta) {
            if (delta === 0) currentZoom = 100;
            else currentZoom += delta;
            if (currentZoom < 50) currentZoom = 50;
            if (currentZoom > 300) currentZoom = 300;
            applyZoom();
        }

        function applyZoom() {
            zoomLabel.textContent = `${currentZoom}%`;
            zoomWrapper.style.width = `${currentZoom}%`;
        }

        function loadGroup(key, preferredTab = 'p') {
            const group = fileGroups[key];
            if (!group) return;
            currentGroupKey = key;
            emptyViewer.classList.add('hidden');
            currentZoom = 100; applyZoom();
            zoomScrollArea.scrollTop = 0; zoomScrollArea.scrollLeft = 0;

            if (group.p) { iframeP.src = pdfMap[group.p.id]; tabBtnP.classList.remove('hidden'); } 
            else { iframeP.src = ""; tabBtnP.classList.add('hidden'); }

            if (group.s) { iframeS.src = pdfMap[group.s.id]; tabBtnS.classList.remove('hidden'); } 
            else { iframeS.src = ""; tabBtnS.classList.add('hidden'); }

            if (preferredTab === 'p' && !group.p && group.s) preferredTab = 's';
            if (preferredTab === 's' && !group.s && group.p) preferredTab = 'p';
            switchTab(preferredTab);
            openViewer();
        }

        function switchTab(type) {
            activeTab = type;
            if (type === 'p') {
                tabBtnP.className = "tab-active px-3 py-1.5 text-xs md:text-sm font-bold rounded-md border transition flex items-center shadow-sm cursor-default";
                tabBtnS.className = "tab-inactive px-3 py-1.5 text-xs md:text-sm font-bold rounded-md border transition flex items-center shadow-sm cursor-pointer";
                iframeP.classList.remove('hidden'); iframeS.classList.add('hidden');
            } else {
                tabBtnP.className = "tab-inactive px-3 py-1.5 text-xs md:text-sm font-bold rounded-md border transition flex items-center shadow-sm cursor-pointer";
                tabBtnS.className = "tab-active px-3 py-1.5 text-xs md:text-sm font-bold rounded-md border transition flex items-center shadow-sm cursor-default";
                iframeP.classList.add('hidden'); iframeS.classList.remove('hidden');
            }
        }

        function checkDevice() {
            const nowMobile = window.innerWidth < 768;
            if (isMobile !== nowMobile) { isMobile = nowMobile; applyLayout(); }
        }

        function setMode(mode) {
            viewMode = mode;
            if (mode === 'split') {
                btnSplit.className = "px-3 py-1 text-xs font-bold rounded shadow-sm bg-white text-blue-600 transition";
                btnModal.className = "px-3 py-1 text-xs font-bold rounded text-gray-500 hover:text-gray-700 transition";
            } else {
                btnSplit.className = "px-3 py-1 text-xs font-bold rounded text-gray-500 hover:text-gray-700 transition";
                btnModal.className = "px-3 py-1 text-xs font-bold rounded shadow-sm bg-white text-blue-600 transition";
            }
            applyLayout();
        }

        function applyLayout() {
            listSection.classList.remove('hidden');
            if (isMobile) {
                listSection.className = "w-full bg-white shadow-sm border border-gray-200 flex flex-col h-full z-10";
            } else {
                if (viewMode === 'split') listSection.className = "w-1/3 bg-white md:rounded-l-lg shadow-sm border border-r-0 border-gray-200 flex flex-col h-full z-10";
                else listSection.className = "w-full bg-white md:rounded-lg shadow-sm border border-gray-200 flex flex-col h-full z-10";
            }
            
            viewerSection.className = ""; 
            viewerContent.className = "flex flex-col bg-white relative overflow-hidden shadow-2xl transition-all"; 

            if (isMobile) {
                viewerSection.classList.add('fixed', 'inset-0', 'z-50', 'modal-backdrop', 'flex', 'items-center', 'justify-center');
                viewerContent.classList.add('w-[95%]', 'h-[92%]', 'rounded-lg');
                btnCloseModal.classList.remove('hidden');
                splitHeaderSpacer.classList.add('hidden');
            } else {
                if (viewMode === 'split') {
                    viewerSection.classList.remove('hidden');
                    viewerSection.classList.add('w-2/3', 'h-full', 'block', 'md:rounded-r-lg', 'border', 'border-l-0', 'border-gray-200');
                    viewerContent.classList.add('h-full', 'w-full');
                    btnCloseModal.classList.add('hidden');
                    splitHeaderSpacer.classList.remove('hidden');
                } else {
                    viewerSection.classList.add('fixed', 'inset-0', 'z-50', 'modal-backdrop', 'flex', 'items-center', 'justify-center');
                    viewerContent.classList.add('w-[90%]', 'h-[90%]', 'md:w-[800px]', 'md:h-[85vh]', 'rounded-xl');
                    btnCloseModal.classList.remove('hidden');
                    splitHeaderSpacer.classList.add('hidden');
                }
            }
            if (isMobile || viewMode === 'modal') {
                if (iframeP.getAttribute('src') === "" && iframeS.getAttribute('src') === "") viewerSection.classList.add('hidden');
            }
        }

        function openViewer() { if (isMobile || viewMode === 'modal') viewerSection.classList.remove('hidden'); }
        function closeViewer() { if (isMobile || viewMode === 'modal') viewerSection.classList.add('hidden'); }

        // 필터 및 목록 렌더링 로직
        const filters = { year: document.getElementById('filterYear'), month: document.getElementById('filterMonth'), grade: document.getElementById('filterGrade'), number: document.getElementById('filterNumber'), type: document.getElementById('filterType') };
        Object.values(filters).forEach(el => el.addEventListener('change', applyFilters));

        function updateFilterOptions() {
            const getUnique = (key) => [...new Set(loadedFiles.map(f => f[key]))].sort();
            populateSelect(filters.year, getUnique('year').reverse(), "연도");
            populateSelect(filters.month, getUnique('month'), "월");
            populateSelect(filters.grade, getUnique('grade'), "학년");
            populateSelect(filters.number, getUnique('number'), "문항");
            populateSelect(filters.type, getUnique('typeDesc'), "유형");
        }

        function populateSelect(select, values, label) {
            const current = select.value;
            select.innerHTML = `<option value="">${label}</option>`;
            values.forEach(v => { const opt = document.createElement('option'); opt.value = v; opt.textContent = v; select.appendChild(opt); });
            if (values.includes(current)) select.value = current;
        }

        function applyFilters() {
            const criteria = { year: filters.year.value, month: filters.month.value, grade: filters.grade.value, number: filters.number.value, typeDesc: filters.type.value };
            let filtered = loadedFiles.filter(f => {
                for (const key in criteria) if (criteria[key] && f[key] !== criteria[key]) return false;
                return true;
            });
            filtered.sort((a, b) => {
                if (a.year !== b.year) return b.year.localeCompare(a.year);
                if (a.month !== b.month) return a.month.localeCompare(b.month);
                if (a.number !== b.number) return a.number.localeCompare(b.number);
                return 0;
            });
            renderList(filtered);
            document.getElementById('listCount').textContent = `${filtered.length}건`;
        }

        function renderList(files) {
            const container = document.getElementById('listArea');
            container.innerHTML = "";
            if (files.length === 0) { container.innerHTML = `<div class="text-center text-gray-400 py-10 text-xs">조건에 맞는 파일이 없습니다.</div>`; return; }

            fileGroups = {};
            files.forEach(f => {
                const key = `${f.year}_${f.month}_${f.grade}_${f.number}_${f.typeDesc}`;
                if (!fileGroups[key]) fileGroups[key] = { p: null, s: null };
                fileGroups[key][f.kind] = f;
            });

            Object.keys(fileGroups).forEach(key => {
                const group = fileGroups[key];
                const base = group.p || group.s; 
                
                const item = document.createElement('div');
                item.onclick = () => loadGroup(key, 'p'); 
                item.className = "p-3 bg-white border border-gray-200 rounded-lg shadow-sm hover:border-blue-300 active:bg-blue-50 cursor-pointer transition mb-2 group";

                const metaRow = `<div class="flex items-center text-[11px] mb-1.5 flex-wrap"><span class="bg-indigo-50 text-indigo-700 border border-indigo-100 px-1.5 py-0.5 rounded font-bold font-mono">${base.year}</span><span class="text-gray-500 ml-1 mr-2">년도(시행)</span><span class="bg-emerald-50 text-emerald-700 border border-emerald-100 px-1.5 py-0.5 rounded font-bold font-mono">${base.month}</span><span class="text-gray-500 ml-1">월</span></div>`;
                const infoRow = `<div class="flex items-center flex-wrap gap-1"><span class="text-xs bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded border border-blue-100 font-bold whitespace-nowrap">고${parseInt(base.grade)}</span><span class="text-xs bg-red-50 text-red-600 px-1.5 py-0.5 rounded border border-red-100 font-bold whitespace-nowrap">${parseInt(base.number)}번</span><span class="text-sm font-extrabold text-gray-800 ml-1 break-keep group-hover:text-blue-700 transition">${base.typeDesc}</span></div>`;
                let btns = `<div class="flex gap-1">`;
                if (group.p) btns += `<button onclick="event.stopPropagation(); loadGroup('${key}', 'p')" class="whitespace-nowrap text-xs bg-white text-blue-600 border border-blue-200 px-2.5 py-1.5 rounded hover:bg-blue-50 hover:border-blue-300 font-bold transition shadow-sm">문제</button>`;
                else btns += `<span class="text-xs text-gray-300 px-2 py-1.5">문제없음</span>`;
                if (group.s) btns += `<button onclick="event.stopPropagation(); loadGroup('${key}', 's')" class="whitespace-nowrap text-xs bg-white text-green-600 border border-green-200 px-2.5 py-1.5 rounded hover:bg-green-50 hover:border-green-300 font-bold transition shadow-sm">해설</button>`;
                btns += `</div>`;

                item.innerHTML = `<div class="flex justify-between items-end"><div class="flex flex-col min-w-0 mr-2">${metaRow}${infoRow}</div><div class="shrink-0 mb-0.5">${btns}</div></div>`;
                container.appendChild(item);
            });
        }
    </script>
    <script async defer src="https://apis.google.com/js/api.js" onload="gapiLoaded()"></script>
    <script async defer src="https://accounts.google.com/gsi/client" onload="gisLoaded()"></script>
    
</body>
</html>
